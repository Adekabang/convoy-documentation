# Deploying Convoy

::: danger
Convoy is not exactly free software. If you are commercializing this panel, please consider purchasing a monthly subscription to support development.
:::

## Install Docker

Convoy uses Docker for everything. The source code comes with a Docker configuration that will ensure that everything works.

`curl -fsSL https://get.docker.com/ | sh`

## Download Files

Download the latest zipped source code from https://github.com/ConvoyPanel/panel/releases/

Unzip the archive in `/var/www/`. If this directory doesn't exist, create it using `mkdir -p /var/www/`.

## Installation

### Environment Variables

Make a new environment file `cp .env.example .env`

Edit the following variables
```
APP_ENV=production
...
APP_DEBUG=false
...
DB_HOST=mysql
...
DB_DATABASE=DATABASE_NAME
DB_USERNAME=CUSTOM_USER_NAME
DB_PASSWORD=SUPER_SUPER_SECRET_PASS
DB_ROOT_PASSWORD=THIS_PASSWORD_DOESNT_MATCH_THE_ONE_ABOVE
...
CACHE_DRIVER=redis
...
QUEUE_CONNECTION=redis
SESSION_DRIVER=redis
...
REDIS_HOST=redis
REDIS_PASSWORD=SUPER_SECURE_PASSWORD
REDIS_PORT=6379
...
```

### Permissions

Allow Convoy to log output generated by the application.

`chmod o+w ./storage/ -R`

### Preparing for production

Start the base Docker containers

`docker compose up -d nginx php workspace redis database`

Enter the workspace container

`docker compose exec workspace bash`

Run the installation commands

::: warning
If you receive an error running the Composer command regarding a zip extension, run `apt install unzip` in the workspace container.
:::

```
composer install --optimize-autoloader --no-dev
npm install
npm run production
php artisan key:generate
php artisan migrate
php artisan route:cache
php artisan config:cache
```

Exit the container by holding `CNTRL + D`

### Finalizing

Restart the containers

`docker compose restart`

Start the queue worker

`docker compose up -d`

::: info
This documentation is still a work in progress. Other information like generating a user, more optimization commands for production, etc will come out soon.
:::